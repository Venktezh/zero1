<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sudoku | ClearCache Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary: #34495e; --secondary: #7f8c8d;
            --accent: #3498db; --accent-dark: #2980b9;
        }
        body { background: #f6f7f9; font-family: 'Segoe UI', 'Roboto', Arial, sans-serif; margin:0; }
        header { text-align: center; margin-top: 2.3rem; }
        header h1 { font-size: 2.3rem; font-weight: 600; color: var(--primary); margin-bottom: 0.25rem; }
        header .tagline { color: var(--secondary); font-size: 1.07rem; margin: 0; }
        nav { margin: 2.2rem auto 0 auto; display: flex; justify-content: center; }
        .nav-container { display: flex; gap: 1rem; }
        .nav-item {
            padding: 0.7rem 2.1rem; border: 1px solid #e3e8ee; border-radius: 0.6rem; background: #fff;
            color: var(--primary); text-decoration: none; font-weight: 500;
            transition: background 0.15s, color 0.15s;
        }
        .nav-item.active, .nav-item:focus, .nav-item:hover {
            background: var(--primary); color: #fff; outline: none; border-color: var(--primary);
        }
        .sudoku-board {
            display: grid; grid-template-columns: repeat(9, 2.3em); grid-template-rows: repeat(9, 2.3em);
            gap: 2px; justify-content: center; margin: 2em auto 1em auto; width: fit-content;
        }
        .cell {
            background: #fff; border: 1px solid #bbb; font-size: 1.2em; text-align: center; outline: none;
        }
        .cell:focus { border-color: #2980b9; }
        .cell[readonly] { background: #ecf0f1; color: #34495e; font-weight: bold; }
        .cell.block-right { border-right: 3px solid #34495e;}
        .cell.block-bottom { border-bottom: 3px solid #34495e;}
        .controls { text-align: center; margin: 2em 0; }
        .btn {
            background: #3498db; color: #fff; border: none; border-radius: .4em;
            padding: .6em 1.8em; font-size: 1em; font-family: inherit;
            cursor: pointer; margin: 0 .5em;
        }
        .btn:hover { background: #2980b9; }
        #message { text-align:center; margin-top: 1em;font-size:1.10em;}
        .success { color: #27ae60}
        .fail { color: #c0392b}
        @media (max-width: 700px) {
            .sudoku-board { grid-template-columns: repeat(9, 1.6em); grid-template-rows: repeat(9, 1.6em);}
            header h1 { font-size: 1.3rem; }
            .nav-container { gap:0.45rem; }
            .nav-item { padding:0.7rem 1rem; font-size:.97rem;}
        }
    </style>
</head>
<body>
    <header>
        <h1>ClearCache</h1>
        <p class="tagline">Minimal digital workspace</p>
    </header>
    <nav aria-label="Main navigation">
        <div class="nav-container">
            <a href="index.html" class="nav-item">Home</a>
            <a href="about.html" class="nav-item">About</a>
            <a href="contact.html" class="nav-item">Contact</a>
            <a href="game.html" class="nav-item active">Game</a>
        </div>
    </nav>
    <h2 style="text-align:center;margin-top:2em;font-weight:600;color:#34495e;">Sudoku Game</h2>
    <div id="levelLabel" style="color: #3498db; text-align:center; font-size: 1.1em; margin-bottom: 0.7em;">
        Level <span id="level-num">1</span>
    </div>
    <div class="sudoku-board" id="sudokuBoard"></div>
    <div class="controls">
        <button class="btn" onclick="checkSudoku()">Check</button>
        <button class="btn" onclick="restartSudoku()">Restart</button>
        <button class="btn" onclick="nextLevel()">Next Level</button>
    </div>
    <div id="message"></div>
<script>
// --- Sudoku generator helpers (simple and fast/easy!) ---
let level = 1;

// Returns a valid sudoku solution using backtracking (Knuth shuffle)
function generateSudokuSolution() {
    // Simple brute force
    let board = [...Array(9)].map(()=>Array(9).fill(0));
    let rows = Array.from({length:9},()=>Array(10).fill(false));
    let cols = Array.from({length:9},()=>Array(10).fill(false));
    let boxes = Array.from({length:9},()=>Array(10).fill(false));
    function canPlace(r,c,n){
        let b = Math.floor(r/3)*3+Math.floor(c/3);
        return !rows[r][n]&&!cols[c][n]&&!boxes[b][n];
    }
    function place(r,c,n,v){
        let b = Math.floor(r/3)*3+Math.floor(c/3);
        rows[r][n]=v; cols[c][n]=v; boxes[b][n]=v;
    }
    function fill(r=0,c=0){
        if(r===9) return true;
        let nr = (c===8)?r+1:r, nc = (c+1)%9;
        let nums = [1,2,3,4,5,6,7,8,9].sort(()=>Math.random()-0.5);
        for(let n of nums){
            if(canPlace(r,c,n)){
                board[r][c]=n; place(r,c,n,true);
                if(fill(nr,nc)) return true;
                board[r][c]=0; place(r,c,n,false);
            }
        }
        return false;
    }
    fill();
    return board;
}

// Makes an "easy" puzzle out of a solution (keep 36-40 clues)
function makeEasyPuzzle(solution) {
    let puzzle = solution.map(row=>row.slice());
    let positions = [];
    for(let r=0;r<9;r++) for(let c=0;c<9;c++) positions.push([r,c]);
    shuffle(positions);
    let clues = 40 - Math.floor(Math.random()*5); // a bit of variation
    let removed = 81 - clues;
    for(let i=0;i<removed;i++) {
        let [r,c]=positions[i];
        puzzle[r][c]='';
    }
    return puzzle;
}
function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

let solution = [], puzzle = [];
function createSudoku(levelIncrement = false) {
    if (levelIncrement) level++; // For Next Level button
    document.getElementById('level-num').textContent = level;

    solution = generateSudokuSolution();
    puzzle = makeEasyPuzzle(solution);
    renderSudoku();
}
function renderSudoku() {
    const board = document.getElementById('sudokuBoard'); board.innerHTML = '';
    for (let row=0; row<9; row++) {
        for (let col=0; col<9; col++) {
            let cell = document.createElement('input');
            cell.type = 'text';
            cell.maxLength = 1;
            cell.className = 'cell';
            if ((col+1)%3 === 0 && col < 8) cell.classList.add('block-right');
            if ((row+1)%3 === 0 && row < 8) cell.classList.add('block-bottom');
            if (puzzle[row][col] !== "") {
                cell.value = puzzle[row][col];
                cell.readOnly = true;
            } else {
                cell.value = '';
                cell.oninput = function(){ this.value = this.value.replace(/[^1-9]/g,''); };
            }
            cell.dataset.r = row; cell.dataset.c = col;
            board.appendChild(cell);
        }
    }
    document.getElementById('message').textContent = '';
}
function checkSudoku() {
    let correct = true;
    const cells = document.querySelectorAll('.cell:not([readonly])');
    cells.forEach(e => {
        const r = parseInt(e.dataset.r), c = parseInt(e.dataset.c);
        let v = Number(e.value);
        if (v !== solution[r][c]) correct = false;
    });
    const message = document.getElementById('message');
    if (correct) {
        message.innerHTML = `<span class="success">ðŸŽ‰ Correct! Sudoku Solved.</span>`;
    } else {
        message.innerHTML = `<span class="fail">Some cells are wrong or empty. Try again!</span>`;
    }
}
function restartSudoku() { renderSudoku(); }
function nextLevel() { createSudoku(true); }
// First level on load
createSudoku();
</script>
</body>
</html>
